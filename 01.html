<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var fruits = [
        {
          name: "apple",
          value: 1
        },
        {
          name: "apple",
          value: 2
        }, // 总计3个苹果
        {
          name: "banana",
          value: 2
        },
        {
          name: "banana",
          value: 3
        }
      ]; // 总计5个香蕉

      var fruitTotal = []; // 存最终数据结果

      // 数据按照水果名称进行归类
      var nameContainer = {}; // 针对键name进行归类的容器
      fruits.forEach(item => {
        nameContainer[item.name] = nameContainer[item.name] || [];

        //当逻辑或||时，找到为true的分项就停止处理，并返回该分项的值，否则执行完，并返回最后分项的值。

        nameContainer[item.name].push(item);
      });

      console.log(nameContainer); // 按照水果名称归类完成：{ apple: Array(2), banana: Array(2) }

      // 统计不同种类水果的数量
      var fruitName = Object.keys(nameContainer); // 获取水果种类：["apple", "banana"]
      fruitName.forEach(nameItem => {
        let count = 0;
        nameContainer[nameItem].forEach(item => {
          count += item.value; // 遍历每种水果中包含的条目计算总数
        });
        fruitTotal.push({ name: nameItem, total: count });
      });
      console.log(fruitTotal);
    </script>
  </body>
</html>
